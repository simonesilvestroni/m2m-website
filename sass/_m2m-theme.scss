// ------------------------------------------------ \\
// $CUSTOM THEME
//
// * Custom components
// * Custom utility classes
// * Imported in `m2m.scss`
// ------------------------------------------------ //


// ------------------------------------------------ \\
// $GENERAL
// ------------------------------------------------ //
html {
  border-top: 0.3rem solid gray-700;
}
body {}
main {}


// ------------------------------------------------ \\
// $SPACING
// ------------------------------------------------ //

.ms-n5 {
  margin-left: rfs-fluid-value(-120px);
}


// ------------------------------------------------ \\
// $LOGO
// ------------------------------------------------ //
@include media-breakpoint-down(md) {
  .m2m-logo {
    width: 200px;
  } 
}


// ------------------------------------------------ \\
// $HEADINGS
// ------------------------------------------------ //

h1 {
  @extend #{$site-prefix}-mask-texture;
}

// Search page result heading (component)
h4 {
  .list-result & {
    @extend .h2;
    margin-bottom: $spacer;
  }
}


// ------------------------------------------------ \\
// $NAVIGATION
// ------------------------------------------------ //

/* purgecss start ignore */
.navigation-main {
  @include media-breakpoint-down(md) {
    position: fixed;
    z-index: 9000;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    font-family: $font-family-base;
    @include font-size($font-size-sm*0.80);
    text-transform: uppercase;
    padding: 0;
    border-top: 4px solid $background-l-20;
    background-color: $white;
    ul {
      @include list-unstyled();
      margin: 0;
      padding: 0;
    }
    li {
      display: inline-block;
      width: 25%;
      margin-right: -4px !important;
      padding: 0;
      border-left: 1px solid $background-l-30;
      &:first-child {
        border-left: 0;
      }
    }
    a {
      display: block;
      color: $background-d-70;
      padding: $spacer*0.75 0;
      width: 100%;
      &:hover {
        color: $background-d-50;
        background-color: $background-l-80;
      }
    }
  }

  @include font-size($font-size-lg*1.25);
  font-family: $headings-font-family;

  ul {
    @include list-unstyled();
  }

  a {
    display: inline-block;
  }
}
/* purgecss end ignore */
#{$site-prefix}-current {
  color: $link-d-40;
}
#{$site-prefix}-right-arrow::after {
  display: inline-block;
  content: '\203a';
  padding-left: 2px;
}
#{$site-prefix}-left-arrow::before {
  display: inline-block;
  content: '\2039';
  padding-right: 2px;
}


// ------------------------------------------------ \\
// $TYPOGRAPHY
// ------------------------------------------------ //

p {
  @extend %m2m-entry-fs;
  hyphens: auto;

  // Lead paragraphs
  &.lead {
    font-size: rfs-fluid-value(26px);
    line-height: 1.3;
    text-indent: 0;
    text-align: left !important;
    margin: $spacer*2 0 !important;
  }
}

code {
  background-color: $white;
  padding: $spacer*0.1;
  border-radius: 3px;
}

// Font micro size
#{$site-prefix}-font-micro {
  @include font-size($micro-font-size);
  line-height: 1.2;
}

// Blockquote
blockquote {
  @extend .blockquote;
  margin-top: $spacer*2;
  padding-left: $spacer*1.25;
  border-left: 2px solid $background-d-10;
  line-height: 1.3;
  @include media-breakpoint-up(md) {
    width: 80%;
  }
  p {
    display: inline;
    text-indent: 0;
    &:first-child {
      margin-bottom: $spacer;
    }
  }
}

// Blockquote cite
cite {
  display: block;
  font-style: normal;
  text-indent: 0;
  margin-top: $spacer*0.5;
}


// ------------------------------------------------ \\
// $LINKS
// ------------------------------------------------ //

// Links and hover (component as a utility class)
%m2m-link,
#{$site-prefix}-link {
  @extend #{$site-prefix}-transition-txtdec-03s;
  color: $link-color;
  text-decoration-line: underline;
  text-decoration-color: $link-decoration;
  text-decoration-thickness: 4px;

  &:hover {
    color: $link-hover-color;
    text-decoration-color: $link-hover-decoration;
  }
}
// Tag & cats results link in search page + 404 page
/* purgecss start ignore */
.page-page-not-found,
.page-search { 
  a[href^="/tag/"] {
    text-transform: capitalize;
    &::before {
      content: 'Tag Archive: ';
    }
  }
  a[href^="/category/"]::before {
    content: 'Category Archive: ';
  }
}
/* purgecss end ignore */
.previous-next-post-links {
  a {
    line-height: 1.3;
  }
}

// Stretched link (TwBs utility class - redefined)
.stretched-link {
  @extend %m2m-link;
}


// ------------------------------------------------ \\
// $ENTRY
// ------------------------------------------------ *
// Default container for posts and pages
// ------------------------------------------------ *
// This is the only real component of the website
// Everything else should be utility-first CSS
// ------------------------------------------------ //

// Default entry font size
%m2m-entry-fs,
#{$site-prefix}-entry-fs {
  font-size: rfs-fluid-value(21px);
}

#{$site-prefix}-entry {
  // entry headings
  h2, h3, h4, h5, h6, .h2, .h3, .h4, .h5, .h6 {
    color: $m2m-heading-color-base;
    margin-top: $spacer * 3;
  }
  
  // Entry block paragraphs: justified and indented
  p {
    margin-bottom: 0;
    line-height: 1.3;
    @include media-breakpoint-up(xxl) {
      text-align: justify;
      line-height: 1.5;
    }

    &:not(.lead) {
      // First paragraph after interruption not indented
      & + p {
        text-indent: $spacer*2;
      }
    }

    // Entry block detached optional paragraph
    &.detached {
      text-indent: 0 !important;
      margin-top: $spacer*2;
    }
  }

  // Entry block link
  a:not(.btn) {
    @extend %m2m-link;
  }

  // Entry block ordered lists
  ol {
    // list-style: none;
    // counter-reset: m2m-counter 0;
    margin-top: $spacer*1.5;
    // padding-left: 1.3rem;
    @include media-breakpoint-up(md) {
      width: 80%;
    }
    
    li {
      @extend %m2m-entry-fs;
      // counter-increment: m2m-counter;
      line-height: 1.6;
      hyphens: auto;
      // padding-left: $spacer*.5;
      // &::before {
      //   display: inline-block;
      //   width: 1.5rem;
      //   content: counter(m2m-counter) ".";
      //   font-family: $headings-font-family;
      //   font-weight: bold;
      //   color: $link-d-20;
      //   margin-left: -1.5rem;
      // }

      ol {
        margin-top: 0;
      }
    }
  }

  // Entry block unordered lists
  ul {
    margin: $spacer*1.5 0;

    li {
      @extend %m2m-entry-fs;
      line-height: 1.5;
      margin: 0;

      ul {
        margin-top: 0;
        margin-bottom: 0;
      }
    }
  }
}


// ------------------------------------------------ \\
// $WEBMENTIONS
// ------------------------------------------------ //

/* purgecss start ignore */
#webmentions,
.webmentions {
  position: relative;
  z-index: 100;
  line-height: 1.2;
  margin-bottom: 3rem;
  width: 75%;
  @include media-breakpoint-down(md) {
    width: 100%;
  }
  ul {
    @include list-unstyled();
    margin: 0;
    padding: 0;

    li {
      margin-bottom: 1rem;

      &.reaction-reply {
        margin-left: .75rem;
        padding-left: 1rem;
        border-left: 2px solid #f3eae5;
      }
    }
  }
  a {
    &.reaction {
      text-decoration: none;

      img {
        @extend .visually-hidden;
      }
    }
  }
}
/* purgecss end ignore */


// ------------------------------------------------ \\
// $PORTFOLIO
// ------------------------------------------------ //
.container-portfolio {
  @include media-breakpoint-up(md) {
    @include make-container();
    width: 800px;
  }
}
#{$site-prefix}-portfolio-quote {
  width: rfs-fluid-value(350px) !important;
}
.layout-portfolio-content {
  h2 { @extend .display-5; }
  h3 { @extend .fs-3; }
}
.inline_toc {
  @extend .my-0;

  li {
    line-height: 2 !important;
  }
}


// ------------------------------------------------ \\
// $ACCORDION
// ------------------------------------------------ //

#{$site-prefix}-accordion {
 
  input {
    display: none;
  }

  &-box {
    position: relative;
    height: 3rem;
    border-radius: 4px;

    &::before {
      content: '';
      position: absolute;
      display: block;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      pointer-events: none;
      border-bottom: 1px solid $background-l-20;
    }

    &-title {
      width: 100%;
      height: 3rem;
      line-height: 3rem;
      padding: 0 1.5rem;
      display: inline-block;
      background-color: $background-l-60;
      cursor: pointer;
      user-select: none;

      h4 {
        line-height: 3rem;
      }
    }

    &-content {
      width: 100%;
      padding: 0.75rem 1.5rem 1.5rem 1.5rem;
      display: none;
      background: $white;
    }

    &-close {
      position: absolute;
      height: 3rem;
      width: 100%;
      top: 0;
      left: 0;
      cursor: pointer;
      display: none;
    }
  }
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title {
  background-color: $background-l-70;
  transition: background-color .3s ease-in-out;
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title h4 {
  color: $black;
  transition: color 1s ease-in-out;
}
input:checked + #{$site-prefix}-accordion-box {
  height: auto;
  border-bottom: 2px solid $background-l-10;
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-content,
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-close {
  display: inline-block;
}
#{$site-prefix}-accordion-arrows #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title {
  padding-left: 2.75rem;
  width: 100%;
}
#{$site-prefix}-accordion-arrows #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title:before {
  position: absolute;
  display: block;
  content: '\203a';
  font-size: 1.5rem;
  left: 1.25rem;
  top: -2px;
  color: $background-d-40;
  transition: all .2s ease-in-out;
}
input:checked + #{$site-prefix}-accordion-box #{$site-prefix}-accordion-box-title:before {
  transform: rotate(90deg);
  color: $black;
}


// ------------------------------------------------ \\
// $BREADCRUMBS
// (TwBs utility component - redefined)
// ------------------------------------------------ //

.breadcrumb-item {
  letter-spacing: $letter-spacing-shrink;

  &:last-child {
    color: $gray-700;
  }

  a {
    @extend #{$site-prefix}-transition-txtdec-03s;
    text-decoration: solid underline $link-l-30 2px;

    &:hover {
      text-decoration-color: $link-hover-decoration;
    }
  }
}


// ------------------------------------------------ \\
// $IMAGES
// ------------------------------------------------ //

img { 
  max-width: 100%; 
  height: auto;
}
figure,
picture { 
  margin: auto;
}
figcaption  {
  @extend .initialism;
}
.comp-logos { 
  width: 130px; 
  height: auto;
}
#{$site-prefix}-logo {
  svg {
    max-width: 100%;
  }
}

// Horizontal line spacer
hr {
  width: $spacer*5;
  text-align: center;
  margin: $spacer*3 auto;
  
  &:not([size]) { height: 2px; }
}


// ------------------------------------------------ \\
// $IMAGEGALLERY
// ------------------------------------------------ //

.img-slide { 
  max-height: 90vh;
}
#{$site-prefix}-img-gallery-thumbs { 
  cursor: pointer;
}
#{$site-prefix}-img-gallery-thumb {
  width: 150px;
  height: 150px;
}
#{$site-prefix}-image-gallery-caption {
  width: 150px;
}


// ------------------------------------------------ \\
// $MODAL
// ------------------------------------------------ //

#{$site-prefix}-modal-content { 
  position: relative;
}
#{$site-prefix}-modal-header { 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 100%; 
  z-index: 9000;
}


// ------------------------------------------------ \\
// $LISTS
// ------------------------------------------------ //

#{$site-prefix}-ul {
  list-style-position: outside;
  margin: $spacer 0 $spacer*1.5 0;
  padding-left: $spacer*1.5;

  li {
    margin: .7rem 0;
    &::marker {
      color: $link-d-20;
    }
  }
}


// ------------------------------------------------ \\
// $EMBEDS
// ------------------------------------------------ //

// Responsive iframe
.iframe-container {
  margin: ($spacer * 3) 0;
  padding-top: 56.25%; // 16:9 aspect ratio
  overflow: hidden;
  position: relative;

  iframe {
    border: 0;
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
  }
}
/* purgecss ignore */
.twitter-tweet-rendered {
  margin: $spacer*3 auto $spacer*4 auto !important;
}


// ------------------------------------------------ \\
// $TABLES
// (TwBs utility class - redefined)
// ------------------------------------------------ //

.table {
  font-size: 1.1rem;
}


// ------------------------------------------------ \\
// $FOOTER
// ------------------------------------------------ //

#{$site-prefix}-footer-wrapper {
  background: rgba($background-l-30, .2);
  flex-shrink: 0;
}
.m2m-footer-wrapper nav a {
  &:first-child {
    padding-left: 0 !important;
  }
  &:last-child {
    padding-right: 0 !important;
  }
}


// ------------------------------------------------ \\
// $BUTTONS
// ------------------------------------------------ //

// Default button
.btn-m2m {
  @extend #{$site-prefix}-transition-bg-01s;
  color: $white;
  background-color: $heading-l-10;

  &:hover {
    color: $white;
    background-color: $heading-d-20;
  }
}

// Default call-to-action
.btn-m2m-cta {
  background-color: $link-l-60 !important;
  color: $black;
  border-bottom: 2px solid $link-l-20;

  &:hover {
    background-color: $link-d-60 !important;
    border-bottom: 2px solid transparent;
    text-shadow: none;
  }
}

// Modal close button
.btn-close {
  background-color: $black;
}


// ------------------------------------------------ \\
// $LABELS
// ------------------------------------------------ //

// Label
.btn-label-m2m {
  font-size: rfs-fluid-value(11px);
  color: $link-d-70;
  padding: 0 $spacer*0.25;
}
.btn-label-lg-m2m {
  font-size: rfs-fluid-value(18px);
}
// Label background
.btn-label-m2m-bg {
  background-color: $m2m-bg-color-base; 
}
// Label link
.btn-label-m2m-link {
  @extend #{$site-prefix}-transition-bg-03s;
  &:hover {
    color: $link-l-80 !important;
    background-color: $background-d-70;
  }
}


// ------------------------------------------------ \\
// $EFFECTS
// ------------------------------------------------ //

#{$site-prefix}-mask-texture {
  -webkit-mask-image: url('/assets/images/heading-texture.png');
  mask-image: url('/assets/images/heading-texture.png');
}
#{$site-prefix}-unmask-texture {
  -webkit-mask-image: none !important;
  mask-image: none !important;
}

// Translucent BG
// ------------------------------------------------ *
#{$site-prefix}-translucent-bg {
  background: rgba($background-l-30, .3);
}

// Text shadow
// ------------------------------------------------ *
#{$site-prefix}-tx-shadow {
  text-shadow: 0px 0px 0px #fff, 0 0 0 #000, 0px 1px 1px #fff;
}

// TRANSITIONS
// ------------------------------------------------ *
// Resulting classes to be used in HTML:
// ------------------------------------------------ *
// * m2m-transition-bg-01s
// * m2m-transition-bg-03s
// * m2m-transition-color-01s
// * m2m-transition-color-03s
// * m2m-transition-txtdec-01s
// * m2m-transition-txtdec-03s
// * m2m-transition-border-01s
// * m2m-transition-border-03s
// * m2m-transition-opacity-01s
// * m2m-transition-opacity-03s
// ------------------------------------------------ *
#{$site-prefix}-transition {
    // Background
    &-bg-01s:hover      { transition: background-color 0.1s ease-in !important; }
    &-bg-03s:hover      { transition: background-color 0.3s ease-in !important; }
    // Text color
    &-color-01s:hover   { transition: color 0.1s ease-in !important; }
    &-color-03s:hover   { transition: color 0.3s ease-in !important; }
    // Text-decoration
    &-txtdec-01s:hover  { transition: text-decoration-color 0.1s ease-in !important; }
    &-txtdec-03s:hover  { transition: text-decoration-color 0.3s ease-in !important; }
    // Opacity
    &-opacity-01s,
    &-opacity-03s       { opacity: 1; }
    &-opacity-01s:hover { opacity: .8; transition: opacity .1s ease-in-out !important; }
    &-opacity-03s:hover { opacity: .8; transition: opacity .3s ease-in-out !important; }
    // Borders
    &-border-01s        { border: 3px solid transparent; }
    &-border-03s        { border: 3px solid transparent; }
    &-border-01s:hover  { border: 3px solid $background-l-20; transition: border 0.1s ease-in !important; }
    &-border-03s:hover  { border: 3px solid $background-l-20; transition: border 0.3s ease-in !important; }
}

// Text rotation
// ------------------------------------------------ *
#{$site-prefix}-text-rotate {
  transform: rotate(359deg);
}

// Letter spacing
// ------------------------------------------------ *
#{$site-prefix}-letter-spacing-w1 {
  letter-spacing: $letter-spacing-wide-1;
}

// Mark (highlights)
// ------------------------------------------------ *
mark {
  &#{$site-prefix}-highlight {
    display: inline-block;
    border-radius: 1.5rem 0.5rem 1.2rem 0.7rem;
    background-image: linear-gradient(-100deg, rgba(255,224,0,0.1), rgba(255,224,0,0.5) 95%, rgba(255,224,0,0.2));
  }
}


// ------------------------------------------------ \\
// $MODAL
// ------------------------------------------------ //

// .modal-open      - body class for killing the scroll
// .modal           - container to scroll within
// .modal-dialog    - positioning shell for the actual modal
// .modal-content   - actual modal w/ bg and corners and stuff

/* purgecss start ignore */

// Container that the modal scrolls within
.modal {
  position: fixed;
  top: 0;
  left: 0;
  z-index: $zindex-modal;
  display: none;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  // Prevent Chrome on Windows from adding a focus outline. For details, see
  // https://github.com/twbs/bootstrap/pull/10951.
  outline: 0;
  // We deliberately don't use `-webkit-overflow-scrolling: touch;` due to a
  // gnarly iOS Safari bug: https://bugs.webkit.org/show_bug.cgi?id=158342
  // See also https://github.com/twbs/bootstrap/issues/17695
}

// Shell div to position the modal with bottom padding
.modal-dialog {
  position: relative;
  width: auto;
  margin: $modal-dialog-margin;
  // allow clicks to pass through for custom click handling to close modal
  pointer-events: none;

  // When fading in the modal, animate it to slide down
  .modal.fade & {
    @include transition($modal-transition);
    transform: $modal-fade-transform;
  }
  .modal.show & {
    transform: $modal-show-transform;
  }

  // When trying to close, animate focus to scale
  .modal.modal-static & {
    transform: $modal-scale-transform;
  }
}

.modal-dialog-scrollable {
  height: subtract(100%, $modal-dialog-margin * 2);

  .modal-content {
    max-height: 100%;
    overflow: hidden;
  }

  .modal-body {
    overflow-y: auto;
  }
}

.modal-dialog-centered {
  display: flex;
  align-items: center;
  min-height: subtract(100%, $modal-dialog-margin * 2);
}

// Actual modal
.modal-content {
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%; // Ensure `.modal-content` extends the full width of the parent `.modal-dialog`
  // counteract the pointer-events: none; in the .modal-dialog
  color: $modal-content-color;
  pointer-events: auto;
  background-color: $modal-content-bg;
  background-clip: padding-box;
  border: $modal-content-border-width solid $modal-content-border-color;
  @include border-radius($modal-content-border-radius);
  @include box-shadow($modal-content-box-shadow-xs);
  // Remove focus outline from opened modal
  outline: 0;
}

// Modal background
.modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  z-index: $zindex-modal-backdrop;
  width: 100vw;
  height: 100vh;
  background-color: $modal-backdrop-bg;

  // Fade for backdrop
  &.fade { opacity: 0; }
  &.show { opacity: $modal-backdrop-opacity; }
}

// Modal header
// Top section of the modal w/ title and dismiss
.modal-header {
  display: flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: space-between; // Put modal header elements (title and dismiss) on opposite ends
  padding: $modal-header-padding;
  border-bottom: $modal-header-border-width solid $modal-header-border-color;
  @include border-top-radius($modal-content-inner-border-radius);

  .btn-close {
    padding: ($modal-header-padding-y * .5) ($modal-header-padding-x * .5);
    margin: ($modal-header-padding-y * -.5) ($modal-header-padding-x * -.5) ($modal-header-padding-y * -.5) auto;
  }
}

// Title text within header
.modal-title {
  margin-bottom: 0;
  line-height: $modal-title-line-height;
}

// Modal body
// Where all modal content resides (sibling of .modal-header and .modal-footer)
.modal-body {
  position: relative;
  // Enable `flex-grow: 1` so that the body take up as much space as possible
  // when there should be a fixed height on `.modal-dialog`.
  flex: 1 1 auto;
  padding: $modal-inner-padding;
}

// Footer (for actions)
.modal-footer {
  display: flex;
  flex-wrap: wrap;
  flex-shrink: 0;
  align-items: center; // vertically center
  justify-content: flex-end; // Right align buttons with flex property because text-align doesn't work on flex items
  padding: $modal-inner-padding - $modal-footer-margin-between * .5;
  border-top: $modal-footer-border-width solid $modal-footer-border-color;
  @include border-bottom-radius($modal-content-inner-border-radius);

  // Place margin between footer elements
  // This solution is far from ideal because of the universal selector usage,
  // but is needed to fix https://github.com/twbs/bootstrap/issues/24800
  > * {
    margin: $modal-footer-margin-between * .5;
  }
}

// Scale up the modal
@include media-breakpoint-up(sm) {
  // Automatically set modal's width for larger viewports
  .modal-dialog {
    max-width: $modal-md;
    margin: $modal-dialog-margin-y-sm-up auto;
  }

  .modal-dialog-scrollable {
    height: subtract(100%, $modal-dialog-margin-y-sm-up * 2);
  }

  .modal-dialog-centered {
    min-height: subtract(100%, $modal-dialog-margin-y-sm-up * 2);
  }

  .modal-content {
    @include box-shadow($modal-content-box-shadow-sm-up);
  }

  .modal-sm { max-width: $modal-sm; }
}

@include media-breakpoint-up(lg) {
  .modal-lg,
  .modal-xl {
    max-width: $modal-lg;
  }
}

@include media-breakpoint-up(xl) {
  .modal-xl { max-width: $modal-xl; }
}

// scss-docs-start modal-fullscreen-loop
@each $breakpoint in map-keys($grid-breakpoints) {
  $infix: breakpoint-infix($breakpoint, $grid-breakpoints);
  $postfix: if($infix != "", $infix + "-down", "");

  @include media-breakpoint-down($breakpoint) {
    .modal-fullscreen#{$postfix} {
      width: 100vw;
      max-width: none;
      height: 100%;
      margin: 0;

      .modal-content {
        height: 100%;
        border: 0;
        @include border-radius(0);
      }

      .modal-header {
        @include border-radius(0);
      }

      .modal-body {
        overflow-y: auto;
      }

      .modal-footer {
        @include border-radius(0);
      }
    }
  }
}


// ------------------------------------------------ \\
// $CAROUSEL
// ------------------------------------------------ //

// Notes on the classes:
//
// 1. .carousel.pointer-event should ideally be pan-y (to allow for users to scroll vertically)
//    even when their scroll action started on a carousel, but for compatibility (with Firefox)
//    we're preventing all actions instead
// 2. The .carousel-item-start and .carousel-item-end is used to indicate where
//    the active slide is heading.
// 3. .active.carousel-item is the current slide.
// 4. .active.carousel-item-start and .active.carousel-item-end is the current
//    slide in its in-transition state. Only one of these occurs at a time.
// 5. .carousel-item-next.carousel-item-start and .carousel-item-prev.carousel-item-end
//    is the upcoming slide in transition.

.carousel {
  position: relative;
}

.carousel.pointer-event {
  touch-action: pan-y;
}

.carousel-inner {
  position: relative;
  width: 100%;
  overflow: hidden;
  @include clearfix();
}

.carousel-item {
  position: relative;
  display: none;
  float: left;
  width: 100%;
  margin-right: -100%;
  backface-visibility: hidden;
  @include transition($carousel-transition);
}

.carousel-item.active,
.carousel-item-next,
.carousel-item-prev {
  display: block;
}

/* rtl:begin:ignore */
.carousel-item-next:not(.carousel-item-start),
.active.carousel-item-end {
  transform: translateX(100%);
}

.carousel-item-prev:not(.carousel-item-end),
.active.carousel-item-start {
  transform: translateX(-100%);
}

/* rtl:end:ignore */


//
// Alternate transitions
//

.carousel-fade {
  .carousel-item {
    opacity: 0;
    transition-property: opacity;
    transform: none;
  }

  .carousel-item.active,
  .carousel-item-next.carousel-item-start,
  .carousel-item-prev.carousel-item-end {
    z-index: 1;
    opacity: 1;
  }

  .active.carousel-item-start,
  .active.carousel-item-end {
    z-index: 0;
    opacity: 0;
    @include transition(opacity 0s $carousel-transition-duration);
  }
}


//
// Left/right controls for nav
//

.carousel-control-prev,
.carousel-control-next {
  position: absolute;
  top: 0;
  bottom: 0;
  z-index: 1;
  // Use flex for alignment (1-3)
  display: flex; // 1. allow flex styles
  align-items: center; // 2. vertically center contents
  justify-content: center; // 3. horizontally center contents
  width: $carousel-control-width;
  padding: 0;
  color: $carousel-control-color;
  text-align: center;
  background: none;
  border: 0;
  opacity: $carousel-control-opacity;
  @include transition($carousel-control-transition);

  // Hover/focus state
  &:hover,
  &:focus {
    color: $carousel-control-color;
    text-decoration: none;
    outline: 0;
    opacity: $carousel-control-hover-opacity;
  }
}
.carousel-control-prev {
  left: 0;
  background-image: if($enable-gradients, linear-gradient(90deg, rgba($black, .25), rgba($black, .001)), null);
}
.carousel-control-next {
  right: 0;
  background-image: if($enable-gradients, linear-gradient(270deg, rgba($black, .25), rgba($black, .001)), null);
}

// Icons for within
.carousel-control-prev-icon,
.carousel-control-next-icon {
  display: inline-block;
  width: $carousel-control-icon-width;
  height: $carousel-control-icon-width;
  background-repeat: no-repeat;
  background-position: 50%;
  background-size: 100% 100%;
}

/* rtl:options: {
  "autoRename": true,
  "stringMap":[ {
    "name"    : "prev-next",
    "search"  : "prev",
    "replace" : "next"
  } ]
} */
.carousel-control-prev-icon {
  background-image: escape-svg($carousel-control-prev-icon-bg);
}
.carousel-control-next-icon {
  background-image: escape-svg($carousel-control-next-icon-bg);
}

// Optional indicator pips/controls
//
// Add a container (such as a list) with the following class and add an item (ideally a focusable control,
// like a button) with data-bs-target for each slide your carousel holds.

.carousel-indicators {
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 2;
  display: flex;
  justify-content: center;
  padding: 0;
  // Use the .carousel-control's width as margin so we don't overlay those
  margin-right: $carousel-control-width;
  margin-bottom: 1rem;
  margin-left: $carousel-control-width;
  list-style: none;

  [data-bs-target] {
    box-sizing: content-box;
    flex: 0 1 auto;
    width: $carousel-indicator-width;
    height: $carousel-indicator-height;
    padding: 0;
    margin-right: $carousel-indicator-spacer;
    margin-left: $carousel-indicator-spacer;
    text-indent: -999px;
    cursor: pointer;
    background-color: $carousel-indicator-active-bg;
    background-clip: padding-box;
    border: 0;
    // Use transparent borders to increase the hit area by 10px on top and bottom.
    border-top: $carousel-indicator-hit-area-height solid transparent;
    border-bottom: $carousel-indicator-hit-area-height solid transparent;
    opacity: $carousel-indicator-opacity;
    @include transition($carousel-indicator-transition);
  }

  .active {
    opacity: $carousel-indicator-active-opacity;
  }
}


// Optional captions
//
//

.carousel-caption {
  position: absolute;
  right: (100% - $carousel-caption-width) * .5;
  bottom: $carousel-caption-spacer;
  left: (100% - $carousel-caption-width) * .5;
  padding-top: $carousel-caption-padding-y;
  padding-bottom: $carousel-caption-padding-y;
  color: $carousel-caption-color;
  text-align: center;
}

// Dark mode carousel

.carousel-dark {
  .carousel-control-prev-icon,
  .carousel-control-next-icon {
    filter: $carousel-dark-control-icon-filter;
  }

  .carousel-indicators [data-bs-target] {
    background-color: $carousel-dark-indicator-active-bg;
  }

  .carousel-caption {
    color: $carousel-dark-caption-color;
  }
}

/* purgecss end ignore */


// ------------------------------------------------ \\
// $GUESTBOOK
// ------------------------------------------------ //

#{$site-prefix}-guestbook-entry {
  background: rgba($background-l-30, .3);
}